
%
% FACT DEFINITION: trial(Id, Start, Finish, Script, CodeHash, Command, InheritedId, ParentId, Run, Docstring).
% DESCRIPTION: informs that a given *script* with *docstring*,
%              and content *code_hash*,
%              executed during a time period from *start*to *finish*,
%              using noWokflow's *command*,
%              that generated a trial *id*.
%              This trial uses modules from *inherited_id*,
%              is based on *parent_id*,
%              and might be a *run* or a backup trial.
%

:- dynamic(trial/10).
trial(5, 1461759526.63437, 1461759526.76201, 'hello_world_2.py', 'a4658e8b1e65fdd9776444ea982829bb264555c3', 'run -e Tracer hello_world_2.py', nil, 4, 1, nil).

%
% FACT DEFINITION: tag(TrialId, Type, Name, Timestamp).
% DESCRIPTION: informs that a given trial (*trial_id*)
%              has a tag (*name*) of *type*,
%              created at *timestamp*.
%              
%

:- dynamic(tag/4).
tag(5, 'AUTO', '4.1.1', 1461759526.723511).

%
% FACT DEFINITION: module(TrialId, Id, Name, Version, Path, CodeHash).
% DESCRIPTION: informs that a given trial (*trial_id*)
%              imported the *version* of a module (*name*),
%              with content (*code_hash*) written in *path*.
%

:- dynamic(module/6).

%
% DESCRIPTION: informs that a environment attribute (*name*)
%              was defined with *value*
%              in a given trial (*trial_id*).
%

:- dynamic(environment/3).

%
% FACT DEFINITION: function_def(TrialId, Id, Name, CodeHash, FirstLine, LastLine, Docstring).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              a function *name* was defined
%              with content (*code_hash*)
%              between *first_line* and *last_line*
%              and with a *docstring*.
%

:- dynamic(function_def/7).
function_def(5, 1, 'print_greeting', '42246c893a3b06b21c07d8f9118c8707232770d3', 9, 16, nil).

%
% FACT DEFINITION: object(TrialId, FunctionDefId, Id, Name, Type).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              a given function definition (*function_def_id*),
%              has a GLOBAL/ARGUMENT/FUNCTION_CALL (*type*),
%              with *name*.
%              
%

:- dynamic(object/5).
object(5, 1, 1, 'print', 'FUNCTION_CALL').
object(5, -1, 2, 'print_greeting', 'FUNCTION_CALL').
object(5, -1, 3, 'print_greeting', 'FUNCTION_CALL').
object(5, -1, 4, 'print_greeting', 'FUNCTION_CALL').

%
% FACT DEFINITION: activation(TrialId, Id, Name, Line, Start, Finish, CallerActivationId).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              a function *name* was activated
%              by another function (*caller_activation_id*)
%              and executed during a time period from *start*
%              to *finish*.
%

:- dynamic(activation/7).
activation(5, 1, '/Users/tmcphill/GitRepos/yw-noworkflow/examples/02_hello_world/hello_world_2.py', 61, 1461759526.760894, 1461759526.761944, nil).
activation(5, 2, 'print_greeting', 23, 1461759526.761317, 1461759526.761458, 1).
activation(5, 3, 'module.print', 16, 1461759526.761339, 1461759526.761358, 2).
activation(5, 4, 'print_greeting', 25, 1461759526.761614, 1461759526.761711, 1).
activation(5, 5, 'module.print', 16, 1461759526.761632, 1461759526.761644, 4).
activation(5, 6, 'print_greeting', 26, 1461759526.761807, 1461759526.761903, 1).
activation(5, 7, 'module.print', 16, 1461759526.761824, 1461759526.761835, 6).

%
% FACT DEFINITION: object_value(TrialId, ActivationId, Id, Name, Value, Type).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              a given activation (*function_activation_id*),
%              has a GLOBAL/ARGUMENT (*type*) variable *name*,
%              with *value*.
%              
%

:- dynamic(object_value/6).
object_value(5, 2, 1, 'greeting', '''Hello World!''', 'ARGUMENT').
object_value(5, 4, 2, 'greeting', '''Goodbye World!''', 'ARGUMENT').
object_value(5, 6, 3, 'greeting', '''Back again!''', 'ARGUMENT').

%
% FACT DEFINITION: access(TrialId, Id, Name, Mode, ContentHashBefore, ContentHashAfter, Timestamp, ActivationId).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              a file *name*
%              was accessed by a function activation (*activation_id*)
%              in a specific read or write *mode*
%              at a specific *timestamp*.
%              The content of the file
%              was captured before (*content_hash_before*)
%              and after (*content_hash_after*) the access.
%

:- dynamic(access/8).

%
% FACT DEFINITION: variable(TrialId, ActivationId, Id, Name, Line, Value, Timestamp).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              during a specific function activation (*activation_id*),
%              in a specific *line* of code,
%              and in a specific *timestamp*,
%              a variable *name* was updated
%              to a new *value*.
%

:- dynamic(variable/7).
variable(5, 1, 1, 'print_greeting', 9, '<function print_greeting at 0x106289b70>', 1461759526.760966).
variable(5, 1, 3, 'first_greeting', 22, '''Hello World!''', 1461759526.761049).
variable(5, 2, 4, 'greeting', 9, '''Hello World!''', 1461759526.76112).
variable(5, 0, 5, '--graybox--', 0, 'now(n/a)', 1461759526.761167).
variable(5, 3, 6, 'return', 16, nil, 1461759526.761365).
variable(5, 0, 7, '--graybox--', 0, 'now(n/a)', 1461759526.761371).
variable(5, 2, 8, 'module.print', 16, 'now(n/a)', 1461759526.761406).
variable(5, 1, 9, 'print', 0, '<built-in function print>', 1461759526.761448).
variable(5, 2, 10, 'return', 16, 'None', 1461759526.761463).
variable(5, 1, 11, 'print_greeting', 23, 'now(n/a)', 1461759526.761469).
variable(5, 1, 12, 'second_greeting', 24, '''Goodbye World!''', 1461759526.761525).
variable(5, 4, 13, 'greeting', 9, '''Goodbye World!''', 1461759526.761574).
variable(5, 0, 14, '--graybox--', 0, 'now(n/a)', 1461759526.761599).
variable(5, 5, 15, 'return', 16, nil, 1461759526.761648).
variable(5, 0, 16, '--graybox--', 0, 'now(n/a)', 1461759526.761652).
variable(5, 4, 17, 'module.print', 16, 'now(n/a)', 1461759526.761679).
variable(5, 4, 18, 'return', 16, 'None', 1461759526.761716).
variable(5, 1, 19, 'print_greeting', 25, 'now(n/a)', 1461759526.761724).
variable(5, 6, 20, 'greeting', 9, '''Back again!''', 1461759526.761796).
variable(5, 7, 21, 'return', 16, nil, 1461759526.761839).
variable(5, 0, 22, '--graybox--', 0, 'now(n/a)', 1461759526.761843).
variable(5, 6, 23, 'module.print', 16, 'now(n/a)', 1461759526.761871).
variable(5, 6, 24, 'return', 16, 'None', 1461759526.761907).
variable(5, 1, 25, 'print_greeting', 26, 'now(n/a)', 1461759526.761912).

%
% FACT DEFINITION: usage(TrialId, ActivationId, VariableId, Id, Name, Line).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              during a specific function activation (*activation_id*),
%              in a specific *line* of code,
%              a variable *name* was accessed (read, delete).
%

:- dynamic(usage/6).
usage(5, 2, 4, 1, 'greeting', 16).
usage(5, 1, 1, 2, 'print_greeting', 23).
usage(5, 1, 3, 3, 'first_greeting', 23).
usage(5, 4, 13, 4, 'greeting', 16).
usage(5, 1, 1, 5, 'print_greeting', 25).
usage(5, 1, 12, 6, 'second_greeting', 25).
usage(5, 6, 20, 7, 'greeting', 16).
usage(5, 1, 1, 8, 'print_greeting', 26).

%
% FACT DEFINITION: dependency(TrialId, Id, SourceActivationId, SourceId, TargetActivationId, TargetId).
% DESCRIPTION: informs that in a given trial (*trial_id*),
%              the value of a variable (*target_id*)
%              in a specific function activation (*target_activation_id*),
%              influenced somehow the value of another variable (*source_id*)
%              in another function activation (*source_activation_id*).
%              This influence can occur due to direct assignment,
%              matching of arguments in function activations,
%              changes in mutable arguments of function activations,
%              assignment within control flow structure, and function return.
%

:- dynamic(dependency/6).
dependency(5, 1, 2, 8, 3, 6).
dependency(5, 2, 1, 25, 6, 24).
dependency(5, 3, 6, 23, 1, 9).
dependency(5, 4, 0, 14, 1, 12).
dependency(5, 5, 1, 11, 2, 10).
dependency(5, 6, 0, 5, 1, 3).
dependency(5, 7, 0, 7, 2, 4).
dependency(5, 8, 4, 17, 1, 9).
dependency(5, 9, 2, 8, 1, 9).
dependency(5, 10, 2, 4, 1, 3).
dependency(5, 11, 0, 16, 4, 13).
dependency(5, 12, 4, 13, 1, 12).
dependency(5, 13, 5, 15, 0, 16).
dependency(5, 14, 1, 11, 1, 1).
dependency(5, 15, 4, 17, 5, 15).
dependency(5, 16, 1, 19, 4, 18).
dependency(5, 17, 1, 19, 1, 1).
dependency(5, 18, 6, 23, 7, 21).
dependency(5, 19, 3, 6, 0, 7).
dependency(5, 20, 1, 25, 1, 1).
dependency(5, 21, 0, 22, 6, 20).
dependency(5, 22, 7, 21, 0, 22).
